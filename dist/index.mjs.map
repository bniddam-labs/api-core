{"version":3,"sources":["../src/schemas/common.schema.ts","../src/schemas/response.schema.ts","../src/schemas/pagination.schema.ts","../src/schemas/auth.schema.ts","../src/helpers/id.helpers.ts","../src/helpers/pagination.helpers.ts","../src/helpers/slug.helpers.ts","../src/pipes/zod-validation.pipe.ts","../src/decorators/zod-body.decorator.ts","../src/decorators/zod-param.decorator.ts","../src/decorators/zod-query.decorator.ts","../src/filters/all-exceptions.filter.ts","../src/filters/http-exception.filter.ts","../src/interceptors/logging.interceptor.ts","../src/swagger/api-response.decorators.ts","../src/swagger/swagger-setup.ts"],"names":["z","ConsoleLogger","Catch","HttpException","Injectable"],"mappings":"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","file":"index.mjs","sourcesContent":["import { z } from 'zod';\n\n/**\n * Common reusable Zod schemas for IDs, UUIDs, and slugs\n */\n\n// ============================================================================\n// UUID Schemas\n// ============================================================================\n\n/**\n * UUID validation (any version)\n */\nexport const uuidSchema = z.string().uuid('Invalid UUID format');\n\n/**\n * UUID v4 validation (strict)\n */\nexport const uuidV4Schema = z\n\t.string()\n\t.regex(\n\t\t/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,\n\t\t'Invalid UUID v4 format',\n\t);\n\n/**\n * Optional UUID (nullable or undefined)\n */\nexport const optionalUuidSchema = uuidSchema.optional().nullable();\n\n/**\n * Array of UUIDs\n */\nexport const uuidArraySchema = z.array(uuidSchema);\n\n// ============================================================================\n// Slug Schemas\n// ============================================================================\n\n/**\n * Slug validation (lowercase alphanumeric with hyphens)\n *\n * @example \"my-awesome-post\", \"user-profile-123\"\n */\nexport const slugSchema = z\n\t.string()\n\t.regex(\n\t\t/^[a-z0-9]+(-[a-z0-9]+)*$/,\n\t\t'Invalid slug format (must be lowercase alphanumeric with hyphens)',\n\t);\n\n/**\n * Optional slug (nullable or undefined)\n */\nexport const optionalSlugSchema = slugSchema.optional().nullable();\n\n// ============================================================================\n// Route Parameter Schemas\n// ============================================================================\n\n/**\n * Standard ID parameter schema for route params\n *\n * @example\n * ```typescript\n * const params = idParamSchema.parse({ id: '123e4567-e89b-12d3-a456-426614174000' });\n * ```\n */\nexport const idParamSchema = z.object({\n\tid: uuidSchema,\n});\n\n/**\n * Type inference for ID parameter\n */\nexport type IdParam = z.infer<typeof idParamSchema>;\n\n/**\n * Standard slug parameter schema for route params\n *\n * @example\n * ```typescript\n * const params = slugParamSchema.parse({ slug: 'my-awesome-post' });\n * ```\n */\nexport const slugParamSchema = z.object({\n\tslug: slugSchema,\n});\n\n/**\n * Type inference for slug parameter\n */\nexport type SlugParam = z.infer<typeof slugParamSchema>;\n","import { z } from 'zod';\n\n/**\n * Zod schemas for API responses (success and error)\n */\n\n// ============================================================================\n// Success Response Schemas\n// ============================================================================\n\n/**\n * Metadata for API responses\n * Can contain any additional information about the response\n */\nexport const apiResponseMetaSchema = z.record(z.string(), z.unknown());\n\n/**\n * Type inference for API response metadata\n */\nexport type ApiResponseMeta = z.infer<typeof apiResponseMetaSchema>;\n\n/**\n * Create a typed API response schema\n *\n * @template T - Zod schema for the data\n *\n * @example\n * ```typescript\n * const userResponseSchema = createApiResponseSchema(userSchema);\n * type UserResponse = z.infer<typeof userResponseSchema>;\n * // { data: User, meta?: Record<string, unknown> }\n * ```\n */\nexport const createApiResponseSchema = <T extends z.ZodTypeAny>(dataSchema: T) =>\n\tz.object({\n\t\tdata: dataSchema,\n\t\tmeta: apiResponseMetaSchema.optional(),\n\t});\n\n// ============================================================================\n// Error Response Schema\n// ============================================================================\n\n/**\n * Standard error response schema\n * Used across all API endpoints for consistent error handling\n *\n * @example\n * ```typescript\n * {\n *   statusCode: 400,\n *   message: \"Validation failed\",\n *   error: \"Bad Request\",\n *   timestamp: \"2025-01-26T10:30:00.000Z\",\n *   path: \"/api/users\",\n *   method: \"POST\"\n * }\n * ```\n */\nexport const errorResponseSchema = z.object({\n\t/** HTTP status code */\n\tstatusCode: z.number().int().min(100).max(599),\n\t/** Error message (string or array of strings for validation errors) */\n\tmessage: z.union([z.string(), z.array(z.string())]),\n\t/** Error type/name */\n\terror: z.string(),\n\t/** ISO timestamp when the error occurred */\n\ttimestamp: z.string().optional(),\n\t/** Request path that caused the error */\n\tpath: z.string().optional(),\n\t/** HTTP method used */\n\tmethod: z.string().optional(),\n});\n\n/**\n * Type inference for error response\n */\nexport type ErrorResponse = z.infer<typeof errorResponseSchema>;\n","import { z } from 'zod';\n\n/**\n * Zod schemas for pagination\n */\n\n// ============================================================================\n// Basic Pagination Schemas\n// ============================================================================\n\n/**\n * Page-based pagination parameters\n *\n * @example\n * ```typescript\n * const params = paginationParamsSchema.parse({ page: 1, limit: 10 });\n * ```\n */\nexport const paginationParamsSchema = z.object({\n\t/** Page number (1-indexed) */\n\tpage: z.number().int().positive(),\n\t/** Items per page */\n\tlimit: z.number().int().positive(),\n});\n\n/**\n * Type inference for pagination parameters\n */\nexport type PaginationParams = z.infer<typeof paginationParamsSchema>;\n\n/**\n * Offset-based pagination (alternative to page-based)\n *\n * @example\n * ```typescript\n * const params = offsetPaginationSchema.parse({ offset: 0, limit: 10 });\n * ```\n */\nexport const offsetPaginationSchema = z.object({\n\t/** Number of items to skip */\n\toffset: z.number().int().nonnegative(),\n\t/** Number of items to take */\n\tlimit: z.number().int().positive(),\n});\n\n/**\n * Type inference for offset pagination\n */\nexport type OffsetPagination = z.infer<typeof offsetPaginationSchema>;\n\n// ============================================================================\n// Pagination Metadata Schema\n// ============================================================================\n\n/**\n * Pagination metadata returned in API responses\n *\n * @example\n * ```typescript\n * {\n *   page: 1,\n *   limit: 10,\n *   total: 100,\n *   totalPages: 10,\n *   hasNextPage: true,\n *   hasPreviousPage: false\n * }\n * ```\n */\nexport const paginationMetaSchema = z.object({\n\t/** Current page number */\n\tpage: z.number().int().positive(),\n\t/** Items per page */\n\tlimit: z.number().int().positive(),\n\t/** Total number of items across all pages */\n\ttotal: z.number().int().nonnegative(),\n\t/** Total number of pages */\n\ttotalPages: z.number().int().nonnegative(),\n\t/** Whether there is a next page */\n\thasNextPage: z.boolean(),\n\t/** Whether there is a previous page */\n\thasPreviousPage: z.boolean(),\n});\n\n/**\n * Type inference for pagination metadata\n */\nexport type PaginationMeta = z.infer<typeof paginationMetaSchema>;\n\n// ============================================================================\n// Paginated Result Schema\n// ============================================================================\n\n/**\n * Create a schema for paginated API response\n *\n * @template T - Zod schema for individual items\n *\n * @example\n * ```typescript\n * const paginatedUsersSchema = createPaginatedResultSchema(userSchema);\n * type PaginatedUsers = z.infer<typeof paginatedUsersSchema>;\n * // { data: User[], meta: PaginationMeta }\n * ```\n */\nexport const createPaginatedResultSchema = <T extends z.ZodTypeAny>(dataSchema: T) =>\n\tz.object({\n\t\t/** Array of data items */\n\t\tdata: z.array(dataSchema),\n\t\t/** Pagination metadata */\n\t\tmeta: paginationMetaSchema,\n\t});\n\n// ============================================================================\n// Query Parameter Schemas\n// ============================================================================\n\n/**\n * Maximum items per page (used across all pagination schemas)\n */\nexport const MAX_ITEMS_PER_PAGE = 100;\n\n/**\n * Extended pagination with search and sort capabilities\n * Use this for complex list endpoints\n *\n * @example\n * ```typescript\n * const query = paginationQuerySchema.parse({\n *   page: 1,\n *   limit: 10,\n *   search: 'john',\n *   sortBy: 'createdAt',\n *   sortOrder: 'DESC'\n * });\n * ```\n */\nexport const paginationQuerySchema = paginationParamsSchema\n\t.extend({\n\t\t/** Items per page (max 100) */\n\t\tlimit: z.number().int().positive().max(MAX_ITEMS_PER_PAGE),\n\t})\n\t.extend({\n\t\t/** Search term to filter results */\n\t\tsearch: z.string().trim().optional(),\n\t\t/** Field to sort by */\n\t\tsortBy: z.string().optional(),\n\t\t/** Sort direction */\n\t\tsortOrder: z.enum(['ASC', 'DESC']).optional().default('DESC'),\n\t});\n\n/**\n * Type inference for pagination query\n */\nexport type PaginationQuery = z.infer<typeof paginationQuerySchema>;\n\n/**\n * Pagination query with automatic coercion from query strings\n * Use this when parsing URL query parameters\n *\n * @example\n * ```typescript\n * // GET /api/users?page=1&limit=10&search=john\n * const query = paginationQueryCoerceSchema.parse(req.query);\n * ```\n */\nexport const paginationQueryCoerceSchema = z.object({\n\t/** Page number (coerced from string, defaults to 1) */\n\tpage: z.coerce.number().int().positive().default(1),\n\t/** Items per page (coerced from string, max 100, defaults to 10) */\n\tlimit: z.coerce.number().int().positive().max(MAX_ITEMS_PER_PAGE).default(10),\n\t/** Search term */\n\tsearch: z.string().trim().optional(),\n\t/** Field to sort by */\n\tsortBy: z.string().optional(),\n\t/** Sort direction */\n\tsortOrder: z.enum(['ASC', 'DESC']).optional().default('DESC'),\n});\n\n/**\n * Type inference for coerced pagination query\n */\nexport type PaginationQueryCoerce = z.infer<typeof paginationQueryCoerceSchema>;\n","import { z } from 'zod';\nimport { uuidSchema } from './common.schema.js';\n\n/**\n * Zod schemas for authentication and authorization\n */\n\n// ============================================================================\n// Authenticated User Schema\n// ============================================================================\n\n/**\n * Schema for authenticated user in request context\n * Typically attached to requests after authentication middleware\n *\n * @example\n * ```typescript\n * // In NestJS guard or middleware\n * const user = authenticatedUserSchema.parse(request.user);\n * ```\n */\nexport const authenticatedUserSchema = z.object({\n\t/** User unique identifier (UUID) */\n\tid: uuidSchema,\n\t/** User email address */\n\temail: z.email().optional(),\n});\n\n/**\n * Type inference for authenticated user\n */\nexport type AuthenticatedUser = z.infer<typeof authenticatedUserSchema>;\n","/**\n * Validate if a string is a valid UUID v4\n *\n * @param value - String to validate\n * @returns True if valid UUID v4\n *\n * @example\n * ```ts\n * isValidUuid('123e4567-e89b-12d3-a456-426614174000'); // true\n * isValidUuid('invalid'); // false\n * ```\n */\nexport function isValidUuid(value: string): boolean {\n\tconst uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n\treturn uuidRegex.test(value);\n}\n\n/**\n * Validate if a string is specifically a UUID v4\n *\n * @param value - String to validate\n * @returns True if valid UUID v4\n */\nexport function isValidUuidV4(value: string): boolean {\n\tconst uuidV4Regex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n\treturn uuidV4Regex.test(value);\n}\n\n/**\n * Extract all UUIDs from a string\n *\n * @param text - Text containing UUIDs\n * @returns Array of found UUIDs\n *\n * @example\n * ```ts\n * extractUuids('User 123e4567-e89b-12d3-a456-426614174000 and file abc');\n * // ['123e4567-e89b-12d3-a456-426614174000']\n * ```\n */\nexport function extractUuids(text: string): string[] {\n\tconst uuidRegex = /[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/gi;\n\treturn text.match(uuidRegex) || [];\n}\n","import type { OffsetPagination, PaginatedResult, PaginationMeta, PaginationParams } from '../types/index.js';\nimport { MAX_ITEMS_PER_PAGE } from '../schemas/pagination.schema.js';\n\n/**\n * Convert page-based pagination to offset-based pagination\n *\n * @param params - Page and limit\n * @returns Offset and limit for database queries\n *\n * @example\n * ```ts\n * const { offset, limit } = toOffsetPagination({ page: 2, limit: 10 });\n * // offset: 10, limit: 10\n * ```\n */\nexport function toOffsetPagination(params: PaginationParams): OffsetPagination {\n\tconst { page, limit } = params;\n\treturn {\n\t\toffset: (page - 1) * limit,\n\t\tlimit,\n\t};\n}\n\n/**\n * Calculate pagination metadata from total count\n *\n * @param params - Page and limit\n * @param total - Total number of items\n * @returns Complete pagination metadata\n *\n * @example\n * ```ts\n * const meta = calculatePaginationMeta({ page: 2, limit: 10 }, 45);\n * // { page: 2, limit: 10, total: 45, totalPages: 5, hasNextPage: true, hasPreviousPage: true }\n * ```\n */\nexport function calculatePaginationMeta(params: PaginationParams, total: number): PaginationMeta {\n\tconst { page, limit } = params;\n\tconst totalPages = Math.ceil(total / limit);\n\n\treturn {\n\t\tpage,\n\t\tlimit,\n\t\ttotal,\n\t\ttotalPages,\n\t\thasNextPage: page < totalPages,\n\t\thasPreviousPage: page > 1,\n\t};\n}\n\n/**\n * Create a paginated result with data and metadata\n *\n * @param data - Array of items\n * @param params - Page and limit\n * @param total - Total number of items\n * @returns Paginated result with data and meta\n *\n * @example\n * ```ts\n * const result = createPaginatedResult(users, { page: 1, limit: 10 }, 25);\n * ```\n */\nexport function createPaginatedResult<T>(data: T[], params: PaginationParams, total: number): PaginatedResult<T> {\n\treturn {\n\t\tdata,\n\t\tmeta: calculatePaginationMeta(params, total),\n\t};\n}\n\n/**\n * Normalize and validate pagination parameters\n *\n * @param page - Page number (default: 1)\n * @param limit - Items per page (default: 10)\n * @param maxLimit - Maximum allowed limit (default: MAX_ITEMS_PER_PAGE = 100)\n * @returns Normalized pagination parameters\n *\n * @example\n * ```ts\n * const params = normalizePagination(0, 200); // { page: 1, limit: 100 }\n * ```\n */\nexport function normalizePagination(\n\tpage: number = 1,\n\tlimit: number = 10,\n\tmaxLimit: number = MAX_ITEMS_PER_PAGE,\n): PaginationParams {\n\treturn {\n\t\tpage: Math.max(1, Math.floor(page)),\n\t\tlimit: Math.min(maxLimit, Math.max(1, Math.floor(limit))),\n\t};\n}\n","/**\n * Convert a string to a URL-friendly slug\n *\n * - Removes diacritics (accents)\n * - Converts to lowercase\n * - Replaces non-alphanumeric characters with hyphens\n * - Removes leading/trailing hyphens\n * - Collapses multiple hyphens\n *\n * @param value - String to slugify\n * @param fallback - Fallback string if result is empty (default: 'slug')\n * @returns URL-friendly slug\n *\n * @example\n * ```ts\n * slugify('Hello World!'); // 'hello-world'\n * slugify('Café & Restaurant'); // 'cafe-restaurant'\n * slugify('---'); // 'slug'\n * slugify('___', 'default'); // 'default'\n * ```\n */\nexport function slugify(value: string, fallback: string = 'slug'): string {\n\tconst normalized = value\n\t\t.normalize('NFD') // Decompose combined characters\n\t\t.replace(/[\\u0300-\\u036f]/g, '') // Remove diacritics\n\t\t.toLowerCase()\n\t\t.trim()\n\t\t.replace(/[^a-z0-9]+/g, '-') // Replace non-alphanumeric with hyphens\n\t\t.replace(/^-+|-+$/g, '') // Remove leading/trailing hyphens\n\t\t.replace(/-{2,}/g, '-'); // Collapse multiple hyphens\n\n\treturn normalized.length > 0 ? normalized : fallback;\n}\n\n/**\n * Generate a unique slug by appending a number if necessary\n *\n * @param value - Base string to slugify\n * @param existingSlugs - Array of existing slugs to check against\n * @param fallback - Fallback string if result is empty\n * @returns Unique slug\n *\n * @example\n * ```ts\n * generateUniqueSlug('my-post', ['my-post', 'my-post-2']); // 'my-post-3'\n * ```\n */\nexport function generateUniqueSlug(value: string, existingSlugs: string[], fallback?: string): string {\n\tconst baseSlug = slugify(value, fallback);\n\tlet slug = baseSlug;\n\tlet attempt = 1;\n\n\tconst slugSet = new Set(existingSlugs);\n\n\twhile (slugSet.has(slug)) {\n\t\tattempt += 1;\n\t\tslug = `${baseSlug}-${attempt}`;\n\t}\n\n\treturn slug;\n}\n\n/**\n * Validate if a string is a valid slug format\n *\n * @param value - String to validate\n * @returns True if valid slug format\n *\n * @example\n * ```ts\n * isValidSlug('hello-world'); // true\n * isValidSlug('Hello World'); // false\n * isValidSlug('hello_world'); // false\n * ```\n */\nexport function isValidSlug(value: string): boolean {\n\treturn /^[a-z0-9]+(-[a-z0-9]+)*$/.test(value);\n}\n","import { ArgumentMetadata, BadRequestException, Injectable, Logger, PipeTransform } from '@nestjs/common';\nimport type { ZodError, ZodIssue, ZodTypeAny } from 'zod';\n\n/* -------------------------------------------------------\n * TYPE GUARDS – ZOD V4 (exhaustifs)\n * ----------------------------------------------------- */\n\nexport const isInvalidType = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'invalid_type' }> => issue.code === 'invalid_type';\n\nexport const isInvalidFormat = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'invalid_format' }> => issue.code === 'invalid_format';\n\nexport const isTooSmall = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'too_small' }> => issue.code === 'too_small';\n\nexport const isTooBig = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'too_big' }> => issue.code === 'too_big';\n\nexport const isNotMultipleOf = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'not_multiple_of' }> => issue.code === 'not_multiple_of';\n\nexport const isUnrecognizedKeys = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'unrecognized_keys' }> => issue.code === 'unrecognized_keys';\n\nexport const isInvalidUnion = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'invalid_union' }> => issue.code === 'invalid_union';\n\nexport const isInvalidKey = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'invalid_key' }> => issue.code === 'invalid_key';\n\nexport const isInvalidElement = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'invalid_element' }> => issue.code === 'invalid_element';\n\nexport const isInvalidValue = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'invalid_value' }> => issue.code === 'invalid_value';\n\nexport const isCustomIssue = (issue: ZodIssue): issue is Extract<ZodIssue, { code: 'custom' }> => issue.code === 'custom';\n\n/* -------------------------------------------------------\n * readInput helper (corrige définitivement les erreurs TS)\n * ----------------------------------------------------- */\n\nexport function readInput(issue: ZodIssue): string {\n\tconst candidate = issue as { input?: unknown };\n\treturn candidate.input !== undefined ? JSON.stringify(candidate.input) : '<no input>';\n}\n\n/* -------------------------------------------------------\n * ZodValidationPipe complet\n * ----------------------------------------------------- */\n\n@Injectable()\nexport class ZodValidationPipe implements PipeTransform {\n\tprivate readonly logger = new Logger(ZodValidationPipe.name);\n\n\tconstructor(private readonly schema: ZodTypeAny, private readonly schemaName?: string) {}\n\n\ttransform(value: unknown, metadata: ArgumentMetadata) {\n\t\ttry {\n\t\t\treturn this.schema.parse(value);\n\t\t} catch (err) {\n\t\t\tif (err instanceof Error && (err as any).issues) {\n\t\t\t\tthis.logZodValidationError(err as ZodError, value);\n\t\t\t\tthrow new BadRequestException('Validation error');\n\t\t\t}\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\t/* -------------------------------------------------------\n\t * Log complet des erreurs Zod v4\n\t * ----------------------------------------------------- */\n\tprivate logZodValidationError(error: ZodError, rawData: unknown): void {\n\t\tconst schemaInfo = this.schemaName ? `Schema: ${this.schemaName}` : 'Schema: <unnamed>';\n\n\t\tconst separator = '─'.repeat(80);\n\n\t\tconst lines: string[] = ['', separator, '❌ [ZOD VALIDATION ERROR]', schemaInfo, '', 'Issues:'];\n\n\t\tfor (const issue of error.issues) {\n\t\t\tlines.push(...this.formatIssue(issue));\n\t\t}\n\n\t\t// Log des données brutes\n\t\tlines.push('');\n\t\tlines.push('Raw data received:');\n\n\t\tconst rawString = JSON.stringify(rawData, null, 2);\n\t\tif (rawString.length > 3000) {\n\t\t\tlines.push(rawString.slice(0, 3000) + '... [truncated]');\n\t\t} else {\n\t\t\tlines.push(rawString);\n\t\t}\n\n\t\tlines.push(separator);\n\t\tlines.push('');\n\n\t\tthis.logger.error(lines.join('\\n'));\n\t}\n\n\t/* -------------------------------------------------------\n\t * Formatage exhaustif des issues Zod v4\n\t * ----------------------------------------------------- */\n\tprivate formatIssue(issue: ZodIssue): string[] {\n\t\tconst path = issue.path.length > 0 ? issue.path.join('.') : '<root>';\n\t\tconst out: string[] = [`  • ${path}: ${issue.message}`];\n\n\t\tconst inputStr = readInput(issue);\n\n\t\tif (isInvalidType(issue)) {\n\t\t\tout.push(`    └─ Expected: ${issue.expected}`);\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isInvalidFormat(issue)) {\n\t\t\tout.push(`    └─ Format: ${issue.format}`);\n\t\t\tif ('pattern' in issue && issue.pattern) {\n\t\t\t\tout.push(`    └─ Pattern: ${issue.pattern}`);\n\t\t\t}\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isTooSmall(issue)) {\n\t\t\tout.push(`    └─ Minimum: ${issue.minimum}`);\n\t\t\tout.push(`    └─ Inclusive: ${issue.inclusive ?? false}`);\n\t\t\tif (issue.exact) out.push(`    └─ Exact value required`);\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isTooBig(issue)) {\n\t\t\tout.push(`    └─ Maximum: ${issue.maximum}`);\n\t\t\tout.push(`    └─ Inclusive: ${issue.inclusive ?? false}`);\n\t\t\tif (issue.exact) out.push(`    └─ Exact value required`);\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isNotMultipleOf(issue)) {\n\t\t\tout.push(`    └─ Divisor: ${issue.divisor}`);\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isUnrecognizedKeys(issue)) {\n\t\t\tout.push(`    └─ Unrecognized keys: ${issue.keys.join(', ')}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isInvalidUnion(issue)) {\n\t\t\tout.push(`    └─ Invalid union`);\n\t\t\tif (issue.discriminator) {\n\t\t\t\tout.push(`    └─ Discriminator: ${issue.discriminator}`);\n\t\t\t}\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isInvalidKey(issue)) {\n\t\t\tout.push(`    └─ Invalid map/record key`);\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isInvalidElement(issue)) {\n\t\t\tout.push(`    └─ Invalid element in map/set`);\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isInvalidValue(issue)) {\n\t\t\tout.push(`    └─ Invalid value: ${issue.values.join(', ')}`);\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\tif (isCustomIssue(issue)) {\n\t\t\tout.push(`    └─ Custom validation error`);\n\t\t\tif ('params' in issue && issue.params) {\n\t\t\t\tout.push(`    └─ Params: ${JSON.stringify(issue.params)}`);\n\t\t\t}\n\t\t\tout.push(`    └─ Input: ${inputStr}`);\n\t\t\treturn out;\n\t\t}\n\n\t\t// fallback (théoriquement impossible)\n\t\tconst _exhaustiveCheck: never = issue;\n\t\tout.push(`    └─ [Unhandled Zod issue type]`);\n\t\treturn out;\n\t}\n}\n","import { Body } from '@nestjs/common';\nimport { ZodType } from 'zod';\nimport { ZodValidationPipe } from '../pipes/zod-validation.pipe.js';\n\n/**\n * Custom decorator that combines @Body and Zod validation\n *\n * This decorator simplifies the usage of Zod validation in controllers by\n * combining body extraction and validation into a single decorator.\n *\n * In development mode, detailed validation errors will be logged to the console\n * with the schema name (if provided), validation issues, and raw data.\n *\n * @param schema - The Zod schema to validate against\n * @param schemaName - Optional name of the schema for better error logging (e.g., 'loginSchema', 'createUserSchema')\n * @returns ParameterDecorator\n *\n * @example\n * ```typescript\n * import { ZodBody } from '@bniddam-labs/api-core/nestjs';\n * import { z } from 'zod';\n *\n * // Define your schema\n * const createUserSchema = z.object({\n *   email: z.email(),\n *   name: z.string().min(1),\n *   age: z.number().int().min(18).optional(),\n * });\n *\n * type CreateUserDto = z.infer<typeof createUserSchema>;\n *\n * // Basic usage\n * @Post('users')\n * async create(@ZodBody(createUserSchema) dto: CreateUserDto) {\n *   return this.usersService.create(dto);\n * }\n *\n * // With schema name for better logging in development\n * @Post('users')\n * async create(@ZodBody(createUserSchema, 'createUserSchema') dto: CreateUserDto) {\n *   return this.usersService.create(dto);\n * }\n * ```\n */\nexport function ZodBody(schema: ZodType, schemaName?: string): ParameterDecorator {\n\treturn Body(new ZodValidationPipe(schema, schemaName));\n}\n","import { Param } from '@nestjs/common';\nimport type { ZodType } from 'zod';\nimport { ZodValidationPipe } from '../pipes/zod-validation.pipe.js';\n\n/**\n * Custom decorator that combines @Param and Zod validation.\n *\n * Useful for validating route parameters (e.g., UUIDs, slugs) against Zod schemas.\n * In development mode, detailed validation errors will be logged to the console.\n *\n * @param schema - Zod schema used to validate route parameters.\n * @param schemaName - Optional name of the schema for better error logging (e.g., 'idParamSchema', 'slugParamSchema')\n *\n * @example\n * ```typescript\n * import { ZodParam } from '@bniddam-labs/api-core/nestjs';\n * import { idParamSchema, slugParamSchema, type IdParam, type SlugParam } from '@bniddam-labs/api-core/core';\n *\n * // Validate UUID param\n * @Get(':id')\n * async findOne(@ZodParam(idParamSchema) params: IdParam) {\n *   return this.usersService.findOne(params.id);\n * }\n *\n * // Validate slug param\n * @Get('posts/:slug')\n * async findBySlug(@ZodParam(slugParamSchema) params: SlugParam) {\n *   return this.postsService.findBySlug(params.slug);\n * }\n *\n * // With schema name for better logging\n * @Delete(':id')\n * async remove(@ZodParam(idParamSchema, 'idParamSchema') params: IdParam) {\n *   return this.usersService.remove(params.id);\n * }\n * ```\n */\nexport function ZodParam(schema: ZodType, schemaName?: string): ParameterDecorator {\n\treturn Param(new ZodValidationPipe(schema, schemaName));\n}\n","import { Query } from '@nestjs/common';\nimport type { ZodType } from 'zod';\nimport { ZodValidationPipe } from '../pipes/zod-validation.pipe.js';\n\n/**\n * Custom decorator that combines @Query and Zod validation.\n *\n * In development mode, detailed validation errors will be logged to the console\n * with the schema name (if provided), validation issues, and raw data.\n *\n * @param schema - Zod schema used to validate query parameters.\n * @param schemaName - Optional name of the schema for better error logging (e.g., 'paginationQueryCoerceSchema')\n *\n * @example\n * ```typescript\n * import { ZodQuery } from '@bniddam-labs/api-core/nestjs';\n * import { paginationQueryCoerceSchema, type PaginationQueryCoerce } from '@bniddam-labs/api-core/core';\n * import { z } from 'zod';\n *\n * // Paginated list with auto-coercion from query strings\n * @Get('users')\n * async findAll(@ZodQuery(paginationQueryCoerceSchema) query: PaginationQueryCoerce) {\n *   // query.page, query.limit automatically converted to numbers\n *   return this.usersService.findAll(query);\n * }\n *\n * // Custom search schema\n * const searchSchema = z.object({\n *   q: z.string().min(1),\n *   category: z.enum(['all', 'posts', 'users']).optional().default('all'),\n * });\n *\n * type SearchQuery = z.infer<typeof searchSchema>;\n *\n * @Get('search')\n * async search(@ZodQuery(searchSchema, 'searchSchema') query: SearchQuery) {\n *   return this.searchService.search(query);\n * }\n * ```\n */\nexport function ZodQuery(schema: ZodType, schemaName?: string): ParameterDecorator {\n\treturn Query(new ZodValidationPipe(schema, schemaName));\n}\n","import { type ArgumentsHost, Catch, type ExceptionFilter, HttpException, HttpStatus } from '@nestjs/common';\nimport type { Request, Response } from 'express';\nimport { ConsoleLogger } from '@bniddam-labs/core';\nimport type { ErrorResponse } from '../types/index.js';\n\n/**\n * Global exception filter that catches all uncaught exceptions\n * Provides consistent error response formatting and logging\n *\n * In production, sensitive error details are hidden from the response\n * In development, full error details are included for debugging\n */\n@Catch()\nexport class AllExceptionsFilter implements ExceptionFilter {\n\tprivate readonly logger = new ConsoleLogger('AllExceptionsFilter');\n\n\tcatch(exception: unknown, host: ArgumentsHost): void {\n\t\tconst ctx = host.switchToHttp();\n\t\tconst response = ctx.getResponse<Response>();\n\t\tconst request = ctx.getRequest<Request>();\n\n\t\tlet status = HttpStatus.INTERNAL_SERVER_ERROR;\n\t\tlet message: string | string[] = 'Internal server error';\n\n\t\t// Extract status and message from HttpException\n\t\tif (exception instanceof HttpException) {\n\t\t\tstatus = exception.getStatus();\n\t\t\tconst exceptionResponse = exception.getResponse();\n\n\t\t\tif (typeof exceptionResponse === 'string') {\n\t\t\t\tmessage = exceptionResponse;\n\t\t\t} else if (typeof exceptionResponse === 'object') {\n\t\t\t\tconst responseObj = exceptionResponse as Record<string, unknown>;\n\t\t\t\tif (responseObj.message) {\n\t\t\t\t\tmessage = responseObj.message as string | string[];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Log the error with full stack trace\n\t\tthis.logger.error(`Unhandled exception: ${request.method} ${request.url}`, exception instanceof Error ? exception.stack : String(exception));\n\n\t\t// Build error response conforming to ErrorResponse type\n\t\tconst errorResponse: ErrorResponse = {\n\t\t\tstatusCode: status,\n\t\t\terror: this.getErrorName(status),\n\t\t\tmessage: process.env.NODE_ENV === 'production' ? 'Internal server error' : message,\n\t\t\ttimestamp: new Date().toISOString(),\n\t\t\tpath: request.url,\n\t\t\tmethod: request.method,\n\t\t};\n\n\t\tresponse.status(status).json(errorResponse);\n\t}\n\n\t/**\n\t * Get standard HTTP error name from status code\n\t */\n\tprivate getErrorName(status: number): string {\n\t\tconst errorNames: Record<number, string> = {\n\t\t\t400: 'Bad Request',\n\t\t\t401: 'Unauthorized',\n\t\t\t403: 'Forbidden',\n\t\t\t404: 'Not Found',\n\t\t\t409: 'Conflict',\n\t\t\t422: 'Unprocessable Entity',\n\t\t\t429: 'Too Many Requests',\n\t\t\t500: 'Internal Server Error',\n\t\t\t502: 'Bad Gateway',\n\t\t\t503: 'Service Unavailable',\n\t\t};\n\t\treturn errorNames[status] || 'Error';\n\t}\n}\n","import { type ArgumentsHost, Catch, type ExceptionFilter, HttpException } from '@nestjs/common';\nimport type { Request, Response } from 'express';\nimport { ConsoleLogger } from '@bniddam-labs/core';\nimport type { ErrorResponse } from '../types/index.js';\n\n/**\n * Exception filter specifically for HttpException instances\n * Provides detailed error formatting and security-aware logging\n *\n * In production mode, sensitive error details are stripped from 500+ errors\n */\n@Catch(HttpException)\nexport class HttpExceptionFilter implements ExceptionFilter {\n\tprivate readonly logger = new ConsoleLogger('HttpExceptionFilter');\n\n\tcatch(exception: HttpException, host: ArgumentsHost): void {\n\t\tconst ctx = host.switchToHttp();\n\t\tconst response = ctx.getResponse<Response>();\n\t\tconst request = ctx.getRequest<Request>();\n\t\tconst status = exception.getStatus();\n\n\t\tconst exceptionResponse = exception.getResponse();\n\n\t\t// Extract message and error from exception response\n\t\tlet message: string | string[] = 'Internal server error';\n\t\tlet error = this.getErrorName(status);\n\n\t\tif (typeof exceptionResponse === 'object' && exceptionResponse !== null) {\n\t\t\tconst responseObj = exceptionResponse as Record<string, unknown>;\n\t\t\tif (responseObj.message) {\n\t\t\t\tmessage = responseObj.message as string | string[];\n\t\t\t}\n\t\t\tif (responseObj.error && typeof responseObj.error === 'string') {\n\t\t\t\terror = responseObj.error;\n\t\t\t}\n\t\t} else if (typeof exceptionResponse === 'string') {\n\t\t\tmessage = exceptionResponse;\n\t\t}\n\n\t\tconst errorResponse: ErrorResponse = {\n\t\t\tstatusCode: status,\n\t\t\tmessage,\n\t\t\terror,\n\t\t\ttimestamp: new Date().toISOString(),\n\t\t\tpath: request.url,\n\t\t\tmethod: request.method,\n\t\t};\n\n\t\t// Log error with appropriate level\n\t\tif (status >= 500) {\n\t\t\tthis.logger.error(`HTTP ${status} Error: ${request.method} ${request.url}`, exception.stack);\n\t\t} else {\n\t\t\tthis.logger.warn(\n\t\t\t\t`HTTP ${status} Error: ${request.method} ${request.url} - ${Array.isArray(errorResponse.message) ? errorResponse.message.join(', ') : errorResponse.message}`,\n\t\t\t);\n\t\t}\n\n\t\t// In production, sanitize 500+ errors to prevent information leakage\n\t\tif (process.env.NODE_ENV === 'production' && status >= 500) {\n\t\t\terrorResponse.message = 'Internal server error';\n\t\t\terrorResponse.error = 'Internal Server Error';\n\t\t}\n\n\t\tresponse.status(status).json(errorResponse);\n\t}\n\n\t/**\n\t * Get standard HTTP error name from status code\n\t */\n\tprivate getErrorName(status: number): string {\n\t\tconst errorNames: Record<number, string> = {\n\t\t\t400: 'Bad Request',\n\t\t\t401: 'Unauthorized',\n\t\t\t403: 'Forbidden',\n\t\t\t404: 'Not Found',\n\t\t\t409: 'Conflict',\n\t\t\t422: 'Unprocessable Entity',\n\t\t\t429: 'Too Many Requests',\n\t\t\t500: 'Internal Server Error',\n\t\t\t502: 'Bad Gateway',\n\t\t\t503: 'Service Unavailable',\n\t\t};\n\t\treturn errorNames[status] || 'Error';\n\t}\n}\n","import { type CallHandler, type ExecutionContext, Injectable, type NestInterceptor } from '@nestjs/common';\nimport type { Request, Response } from 'express';\nimport type { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ConsoleLogger } from '@bniddam-labs/core';\nimport type { AuthenticatedUser } from '../types/index.js';\n\n/**\n * Interface for authenticated requests with user information\n */\nexport interface AuthenticatedRequest extends Request {\n\tuser?: AuthenticatedUser;\n}\n\n/**\n * HTTP request logging interceptor\n * Logs incoming requests and their completion with duration and status\n *\n * Logs include:\n * - Request method, URL, IP, user agent\n * - User ID if authenticated\n * - Response status code and duration\n * - Error details on failure\n */\n@Injectable()\nexport class LoggingInterceptor implements NestInterceptor {\n\tprivate readonly logger = new ConsoleLogger('LoggingInterceptor');\n\n\tintercept(context: ExecutionContext, next: CallHandler): Observable<unknown> {\n\t\t// Only intercept HTTP requests\n\t\tif (context.getType() !== 'http') {\n\t\t\treturn next.handle();\n\t\t}\n\n\t\tconst request = context.switchToHttp().getRequest<Request>();\n\t\tconst response = context.switchToHttp().getResponse<Response>();\n\t\tconst { method, url, ip } = request;\n\t\tconst userAgent = request.get('User-Agent') ?? '';\n\t\tconst startTime = Date.now();\n\n\t\t// Get user info if authenticated\n\t\tconst user = (request as AuthenticatedRequest).user;\n\t\tconst userId = user?.id ?? 'anonymous';\n\n\t\tthis.logger.log(`Incoming Request: ${method} ${url} - IP: ${ip} - User: ${userId} - UserAgent: ${userAgent}`);\n\n\t\treturn next.handle().pipe(\n\t\t\ttap({\n\t\t\t\tnext: () => {\n\t\t\t\t\tconst duration = Date.now() - startTime;\n\t\t\t\t\tconst { statusCode } = response;\n\n\t\t\t\t\tthis.logger.log(`Completed Request: ${method} ${url} - ${statusCode} - ${duration}ms - User: ${userId}`);\n\t\t\t\t},\n\t\t\t\terror: (error: Error & { status?: number; statusCode?: number }) => {\n\t\t\t\t\tconst duration = Date.now() - startTime;\n\t\t\t\t\tconst statusCode = error.status ?? error.statusCode ?? 500;\n\n\t\t\t\t\tthis.logger.error(`Failed Request: ${method} ${url} - ${statusCode} - ${duration}ms - User: ${userId}`, error.stack);\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\t}\n}\n","import { applyDecorators, type Type } from '@nestjs/common';\nimport { ApiResponse } from '@nestjs/swagger';\nimport { z } from 'zod';\n\n/**\n * Zod schema for API response decorator options\n */\nexport const apiResponseDecoratorOptionsSchema = z.object({\n\t/** HTTP status code */\n\tstatus: z.number().int().min(100).max(599),\n\t/** Response description */\n\tdescription: z.string(),\n\t/** Response type/DTO class */\n\ttype: z.custom<Type<unknown>>().optional(),\n\t/** Whether the response is an array */\n\tisArray: z.boolean().optional().default(false),\n});\n\n/**\n * Options for API response decorator\n */\nexport type ApiResponseDecoratorOptions = Omit<\n\tz.infer<typeof apiResponseDecoratorOptionsSchema>,\n\t'isArray'\n> & {\n\tisArray?: boolean;\n};\n\n/**\n * Decorator for documenting successful API responses in Swagger\n *\n * @param options - Response configuration options\n *\n * @example\n * ```typescript\n * import { ApiSuccessResponse } from '@bniddam-labs/api-core/nestjs';\n *\n * @Get()\n * @ApiSuccessResponse({\n *   status: 200,\n *   description: 'Returns list of users',\n *   type: UserDto,\n *   isArray: true,\n * })\n * async findAll() {\n *   return this.usersService.findAll();\n * }\n * ```\n */\nexport function ApiSuccessResponse(options: ApiResponseDecoratorOptions) {\n\tconst decorators = [\n\t\tApiResponse({\n\t\t\tstatus: options.status,\n\t\t\tdescription: options.description,\n\t\t\ttype: options.type,\n\t\t\tisArray: options.isArray,\n\t\t}),\n\t];\n\n\treturn applyDecorators(...decorators);\n}\n\n/**\n * JSON Schema for error responses (matches errorResponseSchema from core/schemas)\n */\nconst errorResponseJsonSchema = {\n\ttype: 'object',\n\trequired: ['statusCode', 'message', 'error'],\n\tproperties: {\n\t\tstatusCode: { type: 'integer', minimum: 100, maximum: 599 },\n\t\tmessage: { oneOf: [{ type: 'string' }, { type: 'array', items: { type: 'string' } }] },\n\t\terror: { type: 'string' },\n\t\ttimestamp: { type: 'string' },\n\t\tpath: { type: 'string' },\n\t\tmethod: { type: 'string' },\n\t},\n};\n\n/**\n * Decorator for documenting error responses in Swagger\n * Uses the errorResponseSchema Zod schema for consistent error format\n *\n * @param status - HTTP status code\n * @param description - Error description\n *\n * @example\n * ```typescript\n * import { ApiErrorResponse } from '@bniddam-labs/api-core/nestjs';\n *\n * @Post()\n * @ApiErrorResponse(400, 'Invalid request data')\n * @ApiErrorResponse(401, 'Unauthorized')\n * async create(@Body() dto: CreateUserDto) {\n *   return this.usersService.create(dto);\n * }\n * ```\n */\nexport function ApiErrorResponse(status: number, description: string) {\n\treturn ApiResponse({\n\t\tstatus,\n\t\tdescription,\n\t\tschema: {\n\t\t\t...errorResponseJsonSchema,\n\t\t\texample: {\n\t\t\t\tstatusCode: status,\n\t\t\t\tmessage: description,\n\t\t\t\terror: getErrorName(status),\n\t\t\t\ttimestamp: new Date().toISOString(),\n\t\t\t\tpath: '/api/resource',\n\t\t\t\tmethod: 'GET',\n\t\t\t},\n\t\t},\n\t});\n}\n\n/**\n * Get standard HTTP error name from status code\n */\nfunction getErrorName(status: number): string {\n\tconst errorNames: Record<number, string> = {\n\t\t400: 'Bad Request',\n\t\t401: 'Unauthorized',\n\t\t403: 'Forbidden',\n\t\t404: 'Not Found',\n\t\t409: 'Conflict',\n\t\t422: 'Unprocessable Entity',\n\t\t429: 'Too Many Requests',\n\t\t500: 'Internal Server Error',\n\t\t502: 'Bad Gateway',\n\t\t503: 'Service Unavailable',\n\t};\n\treturn errorNames[status] || 'Error';\n}\n\n/**\n * Decorator that adds common error responses to an endpoint\n * Includes: 400, 401, 403, 404, 429, 500\n *\n * @example\n * ```typescript\n * import { ApiCommonResponses } from '@bniddam-labs/api-core/nestjs';\n *\n * @Get(':id')\n * @ApiCommonResponses()\n * async findOne(@Param('id') id: string) {\n *   return this.usersService.findOne(id);\n * }\n * ```\n */\nexport function ApiCommonResponses() {\n\treturn applyDecorators(\n\t\tApiErrorResponse(400, 'Bad Request - Validation failed'),\n\t\tApiErrorResponse(401, 'Unauthorized - Authentication required'),\n\t\tApiErrorResponse(403, 'Forbidden - Insufficient permissions'),\n\t\tApiErrorResponse(404, 'Not Found - Resource not found'),\n\t\tApiErrorResponse(429, 'Too Many Requests - Rate limit exceeded'),\n\t\tApiErrorResponse(500, 'Internal Server Error'),\n\t);\n}\n\n/**\n * Decorator for documenting paginated responses in Swagger\n * Shows both the data array and pagination metadata (matches paginationMetaSchema)\n *\n * @param dataType - The DTO class for individual items\n * @param description - Response description\n *\n * @example\n * ```typescript\n * import { ApiPaginatedResponse } from '@bniddam-labs/api-core/nestjs';\n *\n * @Get()\n * @ApiPaginatedResponse(UserDto, 'Returns paginated list of users')\n * async findAll(@Query() paginationDto: PaginationDto) {\n *   return this.usersService.findAll(paginationDto);\n * }\n * ```\n */\nexport function ApiPaginatedResponse(dataType: Type<unknown>, description: string) {\n\treturn ApiResponse({\n\t\tstatus: 200,\n\t\tdescription,\n\t\tschema: {\n\t\t\ttype: 'object',\n\t\t\tproperties: {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'array',\n\t\t\t\t\titems: { $ref: `#/components/schemas/${dataType.name}` },\n\t\t\t\t},\n\t\t\t\tmeta: {\n\t\t\t\t\ttype: 'object',\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\tpage: { type: 'number', example: 1 },\n\t\t\t\t\t\tlimit: { type: 'number', example: 10 },\n\t\t\t\t\t\ttotal: { type: 'number', example: 100 },\n\t\t\t\t\t\ttotalPages: { type: 'number', example: 10 },\n\t\t\t\t\t\thasNextPage: { type: 'boolean', example: true },\n\t\t\t\t\t\thasPreviousPage: { type: 'boolean', example: false },\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n}\n","import type { INestApplication } from '@nestjs/common';\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\nimport { z } from 'zod';\n\n/**\n * Zod schema for Swagger UI options\n */\nexport const swaggerUiOptionsSchema = z.object({\n\t/** Persist authorization data in browser @default true */\n\tpersistAuthorization: z.boolean().optional(),\n\t/** Display request duration in responses @default true */\n\tdisplayRequestDuration: z.boolean().optional(),\n\t/** Sort tags alphabetically @default 'alpha' */\n\ttagsSorter: z.union([z.literal('alpha'), z.function()]).optional(),\n\t/** Sort operations alphabetically @default 'alpha' */\n\toperationsSorter: z.union([z.literal('alpha'), z.literal('method'), z.function()]).optional(),\n});\n\n/**\n * Zod schema for Swagger/OpenAPI setup options\n */\nexport const swaggerSetupOptionsSchema = z.object({\n\t/** API title shown in Swagger UI @default 'API Documentation' */\n\ttitle: z.string().optional(),\n\t/** API description @default 'REST API documentation' */\n\tdescription: z.string().optional(),\n\t/** API version @default '1.0' */\n\tversion: z.string().optional(),\n\t/** Path where Swagger UI will be available @default 'api' */\n\tpath: z.string().optional(),\n\t/** Whether to add Bearer authentication support @default true */\n\taddBearerAuth: z.boolean().optional(),\n\t/** Custom Swagger UI options */\n\tswaggerUiOptions: swaggerUiOptionsSchema.optional(),\n});\n\n/**\n * Configuration options for Swagger/OpenAPI setup\n */\nexport type SwaggerSetupOptions = z.infer<typeof swaggerSetupOptionsSchema>;\n\n/**\n * Sets up Swagger/OpenAPI documentation for a NestJS application\n *\n * Creates and configures Swagger UI with sensible defaults while allowing customization.\n * Automatically adds Bearer JWT authentication if enabled.\n *\n * @param app - The NestJS application instance\n * @param options - Configuration options for Swagger setup\n *\n * @example\n * ```typescript\n * import { setupSwagger } from '@bniddam-labs/api-core/nestjs';\n *\n * async function bootstrap() {\n *   const app = await NestFactory.create(AppModule);\n *\n *   // Basic setup with defaults\n *   setupSwagger(app);\n *\n *   // Custom setup\n *   setupSwagger(app, {\n *     title: 'My API',\n *     description: 'API for my application',\n *     version: '2.0',\n *     path: 'docs',\n *   });\n *\n *   await app.listen(3000);\n * }\n * ```\n */\nexport function setupSwagger(app: INestApplication, options?: SwaggerSetupOptions): void {\n\tconst { title = 'API Documentation', description = 'REST API documentation', version = '1.0', path = 'api', addBearerAuth = true, swaggerUiOptions = {} } = options || {};\n\n\t// Build Swagger configuration\n\tlet configBuilder = new DocumentBuilder().setTitle(title).setDescription(description).setVersion(version);\n\n\t// Add Bearer JWT authentication if enabled\n\tif (addBearerAuth) {\n\t\tconfigBuilder = configBuilder.addBearerAuth(\n\t\t\t{\n\t\t\t\ttype: 'http',\n\t\t\t\tscheme: 'bearer',\n\t\t\t\tbearerFormat: 'JWT',\n\t\t\t\tdescription: 'Enter your JWT token',\n\t\t\t},\n\t\t\t'bearer', // This is the security scheme name\n\t\t);\n\t}\n\n\tconst config = configBuilder.build();\n\n\t// Create Swagger document\n\tconst document = SwaggerModule.createDocument(app, config);\n\n\t// Setup Swagger UI with custom options\n\tconst defaultSwaggerUiOptions = {\n\t\tpersistAuthorization: true,\n\t\tdisplayRequestDuration: true,\n\t\ttagsSorter: 'alpha' as const,\n\t\toperationsSorter: 'alpha' as const,\n\t};\n\n\tSwaggerModule.setup(path, app, document, {\n\t\tswaggerOptions: {\n\t\t\t...defaultSwaggerUiOptions,\n\t\t\t...swaggerUiOptions,\n\t\t},\n\t});\n}\n"]}